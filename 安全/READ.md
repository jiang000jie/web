2020年2月26日

1.CSRF 攻击与防御
    跨站点请求伪造(Cross—Site Request Forgery)
原理：
1. 用户C打开浏览器，访问受信任网站A，输入用户名和密码请求登录网站A；

2. 在用户信息通过验证后，网站A产生Cookie信息并返回给浏览器，此时用户登录网站A成功，可以正常发送请求到网站A；

3. 用户未退出网站A之前，在同一浏览器中，打开一个TAB页访问网站B；

4. 网站B接收到用户请求后，返回一些攻击性代码，并发出一个请求要求访问第三方站点A；

5. 浏览器在接收到这些攻击性代码后，根据网站B的请求，在用户不知情的情况下携带Cookie信息，向网站A发出请求。网站A并不知道该请求其实是由B发起的，所以会根据用户C的Cookie信息以C的权限处理该请求，导致来自网站B的恶意代码被执行。 

简述:用户登录有CSRF漏洞的受信任网站，受信任网站返回用户相关的信息，此时用户打开了恶意网站，恶意网站利用尚未过期的用户信息，发送恶意请求，导致用户的账户受到攻击

防御：
(1) 验证 HTTP Referer 字段
    Referer记录了该 HTTP 请求的来源地址，将触发请求的URL(一般指恶意网站)与请求的URL(一般指受信任的网站)进行对比，如不同则视为CSRF，但是攻击者也可以修改Referer的值;

(2) 在请求地址中添加 token 并验证
    生成无法伪造的信息(Token)，且不存在于客户端中，在请求时加入该信息，但是请求众多，无法为每个请求添加(可以遍历DOM，为相关请求的dom结点加上Token，但动态生成HTML需要手动添加Token)

(3) 在 HTTP 头中自定义属性并验证
    将Token信息加入到请求头中的自定义属性中
源自：https://blog.csdn.net/stpeace/article/details/53512283


2020年2月28日

2.XSS 攻击与防御
XSS,跨站脚本攻击,是指恶意攻击者往Web页面里插入恶意Script代码，当用户浏览该页之时，嵌入其中Web里面的Script代码会被执行，从而达到恶意攻击用户的目的。

1.反射型XSS，在网站中输入恶意的script代码，服务器未过滤该代码，直接返回到浏览器，会造成浏览器执行代码；

2.存储型XSS，通过如更新文章或者修改信息等需要在服务器端修改信息的行为，将恶意代码上传至服务器，之后用户通过访问该页面时会触发代码，容易造成蠕虫，窃取大量的Cookie。

3.DOM XSS，存储型XSS的一种，上传html代码至服务器；

防御：
        (1) 检验恶意代码的特征值
        (2) 将恶意代码转换为字符串；
        (3) 对用户输入的<>进行转义，如&lt;&gt;

源自：https://www.jianshu.com/p/4fcb4b411a66


3.跨域